{"ast":null,"code":"var util = require('util'),\n  events = require('events');\nmodule.exports = SSEClient;\nfunction SSEClient(req, res) {\n  this.req = req;\n  this.res = res;\n  var self = this;\n  res.on('close', function () {\n    self.emit('close');\n  });\n}\nutil.inherits(SSEClient, events.EventEmitter);\nSSEClient.prototype.initialize = function () {\n  this.req.socket.setNoDelay(true);\n  this.res.writeHead(200, {\n    'Content-Type': 'text/event-stream',\n    'Cache-Control': 'no-cache, no-transform',\n    'Connection': 'keep-alive'\n  });\n  this.res.write(':ok\\n\\n');\n};\nSSEClient.prototype.send = function (event, data, id) {\n  if (arguments.length === 0) return;\n  var senderObject = {\n    event: event || undefined,\n    data: data || undefined,\n    id: id || undefined,\n    retry: undefined\n  };\n  if (typeof event == 'object') {\n    senderObject.event = event.event || undefined, senderObject.data = event.data || undefined, senderObject.id = event.id || undefined, senderObject.retry = event.retry || undefined;\n  }\n  if (typeof event != 'object' && arguments.length === 1) {\n    senderObject.event = undefined;\n    senderObject.data = event;\n  }\n  if (senderObject.event) this.res.write('event: ' + senderObject.event + '\\n');\n  if (senderObject.retry) this.res.write('retry: ' + senderObject.retry + '\\n');\n  if (senderObject.id) this.res.write('id: ' + senderObject.id + '\\n');\n  senderObject.data = senderObject.data.replace(/(\\r\\n|\\r|\\n)/g, '\\n');\n  var dataLines = senderObject.data.split(/\\n/);\n  for (var i = 0, l = dataLines.length; i < l; ++i) {\n    var line = dataLines[i];\n    if (i + 1 === l) this.res.write('data: ' + line + '\\n\\n');else this.res.write('data: ' + line + '\\n');\n  }\n};\nSSEClient.prototype.close = function () {\n  this.res.end();\n};","map":{"version":3,"names":["util","require","events","module","exports","SSEClient","req","res","self","on","emit","inherits","EventEmitter","prototype","initialize","socket","setNoDelay","writeHead","write","send","event","data","id","arguments","length","senderObject","undefined","retry","replace","dataLines","split","i","l","line","close","end"],"sources":["/Users/sergionahas/honeyhive/honeyhive-playground/static/node_modules/sse/lib/sseclient.js"],"sourcesContent":["var util    = require('util'),\n    events  = require('events');\n\nmodule.exports = SSEClient;\n\nfunction SSEClient(req, res) {\n  this.req = req;\n  this.res = res;\n  var self = this;\n  res.on('close', function() {\n    self.emit('close');\n  });\n}\n\nutil.inherits(SSEClient, events.EventEmitter);\n\nSSEClient.prototype.initialize = function() {\n  this.req.socket.setNoDelay(true);\n  this.res.writeHead(200, {\n    'Content-Type': 'text/event-stream',\n    'Cache-Control': 'no-cache, no-transform',\n    'Connection': 'keep-alive'\n  });\n  this.res.write(':ok\\n\\n');\n};\n\nSSEClient.prototype.send = function(event, data, id) {\n  if (arguments.length === 0) return;\n\n  var senderObject = {\n    event : event || undefined,\n    data  : data || undefined,\n    id    : id || undefined,\n    retry : undefined\n  };\n\n  if (typeof event == 'object') {\n    senderObject.event   = event.event || undefined,\n    senderObject.data    = event.data || undefined,\n    senderObject.id      = event.id || undefined,\n    senderObject.retry   = event.retry || undefined\n  }\n\n  if (typeof event != 'object' && arguments.length === 1) {\n    senderObject.event   = undefined;\n    senderObject.data    = event;\n  }\n\n  if (senderObject.event) this.res.write('event: ' + senderObject.event + '\\n');\n  if (senderObject.retry) this.res.write('retry: ' + senderObject.retry + '\\n');\n  if (senderObject.id) this.res.write('id: ' + senderObject.id + '\\n');\n\n  senderObject.data = senderObject.data.replace(/(\\r\\n|\\r|\\n)/g, '\\n');\n  var dataLines = senderObject.data.split(/\\n/);\n\n  for (var i = 0, l = dataLines.length; i < l; ++i) {\n    var line = dataLines[i];\n    if ((i+1) === l) this.res.write('data: ' + line + '\\n\\n');\n    else this.res.write('data: ' + line + '\\n');\n  }\n}\n\nSSEClient.prototype.close = function() {\n  this.res.end();\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}